"use strict";angular.module("app-base",["ngSanitize","ngAnimate"]).run(["$rootScope","$http","$httpParamSerializerJQLike",function(t,e,n){t.pageTitle="滕运锋 | Yakima Teng",t.friends=[{url:"http://www.kun.la/",name:"马力"},{url:"http://www.tipskill.com/",name:"TipSkill药学博客"},{url:"http://www.ruanyifeng.com/blog/",name:"阮一峰"},{url:"http://www.orzzone.com/blog/wp-admin",name:"管理"}],t.menus=[{menu:"Pharmaceuticals",title:"药学资讯",tip:"侧重点为药品注册相关的文章，多数来自互联网",href:"#/categories/pharmaceutical-information/1",fontAwesomeIconClass:"fa-line-chart"},{menu:"Html",title:"HTML",tip:"All are about html",href:"#/categories/html/1",fontAwesomeIconClass:"fa-html5"},{menu:"CSS",title:"CSS",tip:"Bootstrap, WechatUI, CSS2&3 and more",href:"#/categories/css/1",fontAwesomeIconClass:"fa-css3"},{menu:"JavaScript",title:"JavaScript",tip:"AngularJS, VueJS, jQuery and more",href:"#/categories/javascript/1",fontAwesomeIconClass:"fa-line-chart"},{menu:"About",title:"关于",tip:"关于博主和这个站点的一些介绍",href:"#/pages/about",fontAwesomeIconClass:"fa-gitlab"}],t.states={isLoading:!0,isAlerting:!1,alertingText:"",alertingOkCallback:function(){},alertingCancelCallback:function(){},isWaiting:!1,presenting:""},t.judgeBrowser=function(t){var e=t.toLowerCase();return/firefox/.test(e)&&!/seamonkey/.test(e)?"Firefox@"+e.match(/firefox\/([0-9\.]+)/)[1].split(".")[0]:e.indexOf("edge")>-1?"Edge@"+e.match(/edge\/([0-9\.]+)/)[1].split(".")[0]:e.indexOf("opera")>-1?"Opera@"+e.match(/opera\/([0-9\.]+)/)[1].split(".")[0]:e.indexOf("opr")>-1?"Opera@"+e.match(/opr\/([0-9\.]+)/)[1].split(".")[0]:e.indexOf("seamonkey")>-1?"Seamonkey@"+e.match(/seamonkey\/([0-9\.]+)/):e.indexOf("chromium")>-1?"Chromium@"+e.match(/chromium\/([0-9\.]+)/)[1].split(".")[0]:e.indexOf("chrome")>-1&&!/chromium|edge/.test(e)?"chrome@"+e.match(/chrome\/([0-9\.]+)/)[1].split(".")[0]:e.indexOf("safari")>-1&&!/(chrome|chromium|edge)/.test(e)?"Safari@"+e.match(/safari\/([0-9\.])+/)[1].split(".")[0]:/window.*trident.*rv:11\.0/.test(e)?"Internet Explorer@"+e.match(/rv:([0-9\.]+)/)[1].split(".")[0]:/; msie/.test(e)?"Internet Explorer@"+e.match(/msie\s([0-9\.]+)/)[1].split(".")[0]:"神奇浏览器"},t.formatDate=function(t){if(t=new Date(t),isNaN(t.valueOf()))return"Amazing Date";var e=t.getFullYear(),n=t.getMonth()<9?"0"+(t.getMonth()+1):""+(t.getMonth()+1),s=t.getDate()<10?"0"+t.getDate():""+t.getDate(),o=t.getHours()<10?"0"+t.getHours():""+t.getHours(),a=t.getMinutes()<10?"0"+t.getMinutes():""+t.getMinutes();return[e,n,s].join("-")+" "+o+":"+a}}]).service("Api",["$rootScope","$http","$httpParamSerializerJQLike",function(t,e,n){var s=this,o=-1===window.location.href.indexOf("localhost")?location.protocol+"//www.yxeye.com":"";s.get=function(t,n){return e({method:"GET",url:o+t,params:n||{},timeout:3e4})},s.post=function(t,n){return e({method:"POST",url:o+t,data:n||{},timeout:3e4})},s.highlightCode=function(){setTimeout(function(){$("pre").each(function(t,e){hljs.highlightBlock(e),$(this).hasClass("xml")&&$(this).text($(this).html())})},0)},s.insertTagP=function(t){return/(<\/a>)|(<\/p>)|(<\/ul>)|(<\/div>)|(<\/dl>)|(<\/article>)|(<\/header>)|(<\/footer>)|(<\/pre>)/.test(t)?(t=t.replace(/<p>\s*?<\/p>/g,""),t=t.replace(/<\/p>\s+?<p>/g,"</p><p>")):(t="<p>"+t.replace(/\B(\n|\r|(\r\n)|(\u0085)|(\u2028)|(\u2029))+\B/g,"</p><p>")+"</p>",t=t.replace(/(<p>)\1/g,"$1"),t=t.replace(/<p>\s*?<\/p>/g,""),t=t.replace(/<\/p>\s+?<p>/g,"</p><p>"),t=t.replace(/<p>(<h[1-6]>)/g,"$1"),t=t.replace(/(<\/h[1-6]>)<\/p>/g,"$1")),t},s.typeOf=function(t){return{}.toString.call(t).slice(8,-1).toLowerCase()},s.merge=function(t,e){if(t&&e)for(var n in e)"object"===s.typeOf(t[n])&&"object"===s.typeOf(e[n])?merge(t[n],e[n]):t[n]=e[n];return t},s.load=function(e){return s.merge(t.states,{isLoading:e})},s.alert=function(e){var n=e.text,o=e.callback;s.merge(t.states,{isAlerting:!0,alertingText:n,alertingOkCallback:function(){o&&o(),console.log(t.states.isAlerting),s.merge(t.states,{isAlerting:!1}),console.log(t.states.isAlerting)},alertingCancelCallback:null})},s.confirm=function(e){var n=e.text,o=e.okCallback,a=e.cancelCallback;s.merge(t.states,{isAlerting:!0,alertingText:n,alertingOkCallback:function(){o&&o(),s.merge(t.states,{isAlerting:!1})},alertingCancelCallback:function(){a&&a(),s.merge(t.states,{isAlerting:!1})}})},s.wait=function(e){return s.merge(t.states,{isWaiting:e})},s.present=function(e){return s.merge(t.states,{presenting:e})}}]).filter("hasParentComment",[function(){return function(t,e){return t.filter(function(t,n,s){return t.comment_parent_id===e})}}]).directive("activeLink",["$location",function(t){return{restrict:"A",link:function(e,n){e.$watch(function(){return t.path()},function(t){var e=n.attr("href");console.log(t,e),t.replace(/[0-9]*$/g,"")===e.replace(/^#/g,"").replace(/[0-9]*$/g,"")?(n.addClass("active"),n.find("span.selected").length<1&&n.append('<span class="selected"></span>')):(n.removeClass("active"),n.find("span.selected").remove())})}}}]).directive("appFooter",[function(){return{restrict:"E",replace:!0,templateUrl:"tpls/footer.html",scope:!1}}]).directive("appSidebar",[function(){return{restrict:"E",replace:!0,templateUrl:"tpls/sidebar.html",scope:!1}}]).directive("appHeader",[function(){return{restrict:"E",replace:!0,templateUrl:"tpls/header.html",scope:!1}}]).directive("appLoading",[function(){return{restrict:"E",replace:!0,templateUrl:"tpls/app-loading.html",scope:!1}}]).directive("appWaiting",[function(){return{restrict:"E",replace:!0,templateUrl:"tpls/app-waiting.html",scope:!1}}]).directive("appAlerting",[function(){return{restrict:"E",replace:!0,templateUrl:"tpls/app-alerting.html",scope:!1}}]),angular.module("templates",[]).run(["$templateCache",function(t){t.put("tpls/app-alerting.html",'<div ng-show="states.isAlerting" class="app-alerting">\n  <div class="wrapper">\n    <header class="header">提示信息</header>\n    <article class="article">{{states.alertingText}}</article>\n    <footer class="footer">\n      <button ng-click="states.alertingOkCallback()" class="btn btn-ok">确定</button>\n      <button ng-show="states.alertingCancelCallback" ng-click="states.alertingCancelCallback()" class="btn btn-cancel">取消</button>\n    </footer>\n  </div>\n</div>\n'),t.put("tpls/app-loading.html",'<div ng-show="states.isLoading" class="app-loading">\n  <div class="pacman">\n    <div class="tool"></div>\n    <div class="tool"></div>\n    <div class="tool"></div>\n    <div class="tool"></div>\n    <div class="tool"></div>\n  </div>\n</div>\n'),t.put("tpls/app-waiting.html",'<div ng-show="!states.isLoading && states.isWaiting" class="app-waiting">\n  <div class="spinner">\n    <span class="bounce bounce1"></span>\n    <span class="bounce bounce2"></span>\n    <span class="bounce bounce3"></span>\n  </div>\n</div>\n'),t.put("tpls/archive.html",'<section class="app-archives">\r\n  <div class="header">Title</div>\r\n  <ul>\r\n    <li ng-repeat="item in allPosts"><a ng-href="#/posts/{{item.post_id}}">{{item.post_title}}</a></li>\r\n  </ul>\r\n</section>\r\n'),t.put("tpls/categories.html",'<ul class="categories">\r\n  <li ng-repeat="x in categories" class="category">\r\n    <a ng-href="#/categories/{{x.slug}}">\r\n      <header><i class="fa fa-3x" ng-class="categoriesLogos[x.slug]"></i></header>\r\n      <article>\r\n        {{x.name}}\r\n      </article>\r\n      <aside ng-show="!x.posts.length" class="dotting"></aside>\r\n      <aside ng-show="x.posts.length">{{x.posts.length}}</aside>\r\n    </a>\r\n  </li>\r\n</ul>\r\n'),t.put("tpls/category.html",'<article>\r\n  <ul class="category_posts">\r\n    <li ng-repeat="item in posts">\r\n      <a ng-href="#/posts/{{item.post_id}}">\r\n        <span>{{item.post_title}}</span>\r\n        <span>{{item.post_date}}</span>\r\n      </a>\r\n    </li>\r\n  </ul>\r\n</article>\r\n'),t.put("tpls/footer.html",'<footer class="app-footer">\r\n  <div class="app-footer-widgets">\r\n    <section class="app-footer-widget" ng-if="recentComments.length">\r\n      <h4>Comments</h4>\r\n      <ul class="comments">\r\n        <li ng-repeat="item in recentComments">\r\n          <a ng-href="#/posts/{{item.post_id}}">{{item.comment_content}}</a>\r\n        </li>\r\n      </ul>\r\n    </section>\r\n    <section class="app-footer-widget" ng-if="pages.length">\r\n      <h4>Pages</h4>\r\n      <ul class="pages">\r\n        <li ng-repeat="item in pages">\r\n          <a ng-href="#/pages/{{item.post_name}}">{{item.post_title}}</a>\r\n        </li>\r\n      </ul>\r\n    </section>\r\n    <section class="app-footer-widget" ng-if="randomPosts.length">\r\n      <h4>Articles</h4>\r\n      <ul class="posts">\r\n        <li ng-repeat="item in randomPosts">\r\n          <a ng-href="#/posts/{{item.post_id}}">{{item.post_title}}</a>\r\n          <span>{{formatDate(item.post_date)}}</span>\r\n        </li>\r\n      </ul>\r\n    </section>\r\n  </div>\r\n  <small class="app-footer-copyright">\r\n    <span class="item">Copyright &copy; 2009-{{currentYear}} Yakima Teng.</span>\r\n    <span class="item">Powered by Node.js &amp; WordPress &amp; MySql.</span>\r\n  </small>\r\n</footer>\r\n'),t.put("tpls/header.html",'<nav class="app-nav" id="app-nav">\r\n  <a active-link href="#/1" class="item item-logo" data-title="首页" data-tooltip="进入首页">\r\n    <img class="img" src="./img/yakima_bright.jpg" alt="Yakima Teng">\r\n    <span class="line">Yakima Teng</span>\r\n  </a>\r\n  <a ng-repeat="item in menus" active-link class="item item-normal" ng-href="{{item.href}}" data-title="{{item.title}}" data-tooltip="{{item.tip}}">\r\n    <i ng-class="item.fontAwesomeIconClass" class="fa"></i>\r\n    <span class="line">{{item.menu}}</span>\r\n  </a>\r\n  <form class="item-form" ng-submit="search($event)">\r\n    <input ng-model="keyword" type="text" class="field" placeholder="Search..." autocomplete="on" />\r\n    <button class="btn" type="submit">^_^</button>\r\n  </form>\r\n</nav>\r\n'),t.put("tpls/login.html",'\x3c!--<div id="output"></div>--\x3e\r\n<div class="login">\r\n  <section class="form-item">\r\n    <aside class="left">\r\n      <label for="login-name">用户名</label>\r\n    </aside>\r\n    <article>\r\n      <input type="text" id="login-name" placeholder="your user name">\r\n    </article>\r\n  </section>\r\n  <section class="form-item">\r\n    <aside>\r\n      <label for="login-password">密&nbsp;码</label>\r\n    </aside>\r\n    <article>\r\n      <input type="text" id="login-password" placeholder="your password">\r\n    </article>\r\n  </section>\r\n  <section class="form-item">\r\n    <article>\r\n      <button>登陆</button>\r\n    </article>\r\n  </section>\r\n</div>\r\n'),t.put("tpls/page.html",'<section class="app-post">\r\n  <header class="app-post-header">\r\n    <h1 class="title">{{post.post_title}}</h1>\r\n  </header>\r\n  <aside class="app-post-byline">\r\n    <span class="date">{{formatDate(post.post_date)}}</span>\r\n  </aside>\r\n  <article class="app-post-content" ng-bind-html="post.post_content"></article>\r\n</section>\r\n'),t.put("tpls/post.html",'<article class="app-post">\r\n  <header class="app-post-header">\r\n    <h1 class="title">{{post.post_title}}</h1>\r\n  </header>\r\n  <aside class="app-post-byline">\r\n    <span class="category"><a ng-href="{{\'#/categories/\' + post.cat_slug + \'/1\'}}">{{post.cat_name}}</a></span>\r\n    <span class="date">{{formatDate(post.post_date)}}</span>\r\n  </aside>\r\n  <article class="app-post-content" ng-bind-html="post.post_content"></article>\r\n  <footer class="app-post-footer">\r\n    <header class="title">相关文章</header>\r\n    <ul class="items">\r\n      <li class="item" ng-repeat="item in relatedPosts">\r\n        <a ng-href="#/posts/{{item.post_id}}" class="link">{{item.post_title}}</a>\r\n      </li>\r\n    </ul>\r\n  </footer>\r\n  <section class="app-post-nav">\r\n    <a ng-href="{{nextPostId === \'\' ? \'\' : \'#/posts/\' + nextPostId + fromValueString}}" class="next">{{nextPostStatus}}</a>\r\n    <a ng-href="{{prePostId === \'\' ? \'\' : \'#/posts/\' + prePostId + fromValueString}}" class="pre">{{prePostStatus}}</a>\r\n  </section>\r\n  <section class="app-post-comments">\r\n    <section ng-repeat="commentOne in relatedComments | filter:getFirstLevelComments" class="post_comment">\r\n      <header class="header">\r\n        <a ng-href="{{commentOne.comment_author_url}}" class="post_comment_author">{{commentOne.comment_author}}</a>\r\n        <span class="item">{{formatDate(commentOne.comment_date)}}</span>\r\n        <span class="item">{{judgeBrowser(commentOne.comment_agent)}}</span>\r\n        <span ng-click="reply(commentOne)" class="item outstanding">回复</span>\r\n      </header>\r\n      <article class="post_comment_content">{{commentOne.comment_content}}</article>\r\n      <section ng-repeat="commentTwo in relatedComments | hasParentComment:commentOne.comment_id" class="post_comment inner-comment">\r\n        <header class="header">\r\n          <a ng-href="{{commentTwo.comment_author_url}}" class="post_comment_author">{{commentTwo.comment_author}}</a>\r\n          <span class="item">{{formatDate(commentTwo.comment_date)}}</span>\r\n          <span class="item">{{judgeBrowser(commentTwo.comment_agent)}}</span>\r\n          <span ng-click="reply(commentTwo)" class="item outstanding">回复</span>\r\n        </header>\r\n        <article class="post_comment_content">{{commentTwo.comment_content}}</article>\r\n        <section ng-repeat="commentThree in relatedComments | hasParentComment:commentTwo.comment_id" class="post_comment inner-comment">\r\n          <header class="header">\r\n            <a ng-href="{{commentThree.comment_author_url}}" class="post_comment_author">{{commentThree.comment_author}}</a>\r\n            <span class="item">{{formatDate(commentThree.comment_date)}}</span>\r\n            <span class="item">{{judgeBrowser(commentThree.comment_agent)}}</span>\r\n            <span ng-click="reply(commentThree)" class="item outstanding">回复</span>\r\n          </header>\r\n          <article class="post_comment_content">{{commentThree.comment_content}}</article>\r\n          <section ng-repeat="commentFour in relatedComments | hasParentComment:commentThree.comment_id" class="post_comment inner-comment">\r\n            <header class="header">\r\n              <a ng-href="{{commentFour.comment_author_url}}" class="post_comment_author">{{commentFour.comment_author}}</a>\r\n              <span class="item">{{formatDate(commentFour.comment_date)}}</span>\r\n              <span class="item">{{judgeBrowser(commentFour.comment_agent)}}</span>\r\n              <span ng-click="reply(commentFour)" class="item outstanding">回复</span>\r\n            </header>\r\n            <article class="post_comment_content">{{commentFour.comment_content}}</article>\r\n            <section ng-repeat="commentFive in relatedComments | hasParentComment:commentFour.comment_id" class="post_comment inner-comment">\r\n              <header class="header">\r\n                <a ng-href="{{commentFive.comment_author_url}}" class="post_comment_author">{{commentFive.comment_author}}</a>\r\n                <span class="item">{{formatDate(commentFive.comment_date)}}</span>\r\n                <span class="item">{{judgeBrowser(commentFive.comment_agent)}}</span>\r\n                \x3c!-- <span ng-click="reply(commentFive)" class="item outstanding">回复</span> --\x3e\r\n              </header>\r\n              <article class="post_comment_content">{{commentFive.comment_content}}</article>\r\n            </section>\r\n          </section>\r\n        </section>\r\n      </section>\r\n    </section>\r\n  </section>\r\n  <section class="app-post-comment-submit">\r\n    <div class="fields">\r\n      <div class="item">\r\n        <label for="commentAuthor" class="label">Name</label>\r\n        <input ng-model="comment.author" id="commentAuthor" type="text" class="field" placeholder="Your name">\r\n      </div>\r\n      <div class="item">\r\n        <label for="commentEmail" class="label">Email</label>\r\n        <input ng-model="comment.email" id="commentEmail" type="text" class="field" placeholder="Your email">\r\n      </div>\r\n      <div class="item">\r\n        <label for="commentUrl" class="label">Blog Url</label>\r\n        <input ng-model="comment.url" id="commentUrl" type="text" class="field" placeholder="your blog url">\r\n      </div>\r\n    </div>\r\n    <div class="content">\r\n      <div ng-class="{\'show\': comment.tip !== \'\'}" class="detail-mask">\r\n        <div class="tip">\r\n          <div class="text">{{comment.tip}}</div>\r\n          <div class="timing">（弹框将于{{comment.timing}}秒后关闭）</div>\r\n        </div>\r\n      </div>\r\n      <textarea ng-model="comment.message" class="detail" id="commentMessage" placeholder="为防止垃圾评论，要求评论内容需以英文开头，以中文结尾，比如：Hello,你真棒"></textarea>\r\n      <button ng-click="submitComment()" class="submit">发表评论</button>\r\n    </div>\r\n  </section>\r\n</article>\r\n'),t.put("tpls/posts.html",'<article class="app-posts">\r\n  <div>\r\n    <article class="app-excerpt" ng-show="!isWaiting && recentPosts.length" ng-repeat="item in recentPosts">\r\n      <header class="app-excerpt-header">\r\n        <a ng-href="{{\'#/posts/\' + item.post_id + \'?from=\' + (from || \'posts\') + \'&value=\' + (value || \'\')}}">{{item[\'post_title\']}}</a>\r\n      </header>\r\n      <aside class="app-excerpt-byline">\r\n        <span class="category"><a ng-href="{{\'#/categories/\' + item.cat_slug + \'/1\'}}">{{item.cat_name}}</a></span>\r\n        <span class="date">{{formatDate(item.post_date)}}</span>\r\n      </aside>\r\n      <article class="app-excerpt-content" ng-bind-html="item.post_excerpt"></article>\r\n      <footer ng-show="item.comment_count === 0" class="app-excerpt-footer">\r\n        <span class="title">暂无评论</span>\r\n      </footer>\r\n      <footer ng-show="item.comment_count !== 0" class="app-excerpt-footer">\r\n        <span class="title">最新评论</span>\r\n        <span class="item"><a ng-href="{{\'#/posts/\' + item.post_id + \'?from=\' + (from || \'posts\') + \'&value=\' + (value || \'\')}}">{{item.recent_comment_content}}</a></span>\r\n      </footer>\r\n    </article>\r\n    <article ng-show="!isWaiting && !recentPosts.length">\r\n      (⊙o⊙)哦，没有文章了\r\n    </article>\r\n    \x3c!-- <article ng-show="isWaiting" class="waiting">\r\n      <i class="fa fa-cog fa-spin fa-3x fa-fw margin-bottom"></i>\r\n      加载中\r\n    </article> --\x3e\r\n  </div>\r\n</article>\r\n<section class="app-page-nav" ng-if="recentPosts.length">\r\n  <a ng-if="currentPostsPageId > 1" ng-href="{{baseLink + (currentPostsPageId - 1)}}" class="first"></a>\r\n  <a ng-if="currentPostsPageId > 5 && recentPosts.length == 10" ng-repeat="i in [-5,-4,-3,-2,-1,0,1,2,3,4]" ng-class="{true: \'active\'}[i == 0]" ng-href="{{baseLink + (currentPostsPageId + i)}}">{{currentPostsPageId + i}}</a>\r\n  <a ng-if="currentPostsPageId > 5 && recentPosts.length < 10" ng-repeat="i in [-5,-4,-3,-2,-1,0]" ng-class="{true: \'active\'}[i == 0]" ng-href="{{baseLink + (currentPostsPageId + i)}}">{{currentPostsPageId + i}}</a>\r\n  <a ng-if="currentPostsPageId <= 5 && recentPosts.length == 10" ng-repeat="i in [1,2,3,4,5,6,7,8,9,10]" ng-class="{\'active\': i == currentPostsPageId}" ng-href="{{baseLink + i}}">{{i}}</a>\r\n  <a ng-if="currentPostsPageId <= 5 && recentPosts.length < 10 && i <= currentPostsPageId" ng-repeat="i in [1,2,3,4,5,6,7,8,9,10]" ng-class="{\'active\': i == currentPostsPageId}" ng-href="{{baseLink + i}}">{{i}}</a>\r\n  <a ng-if="recentPosts.length == 10" ng-href="{{baseLink + (currentPostsPageId + 1)}}" class="last"></a>\r\n</section>\r\n'),t.put("tpls/sidebar.html",'<aside class="app-sidebar">\r\n  <section class="widget-text">\r\n    <img class="top" src="./img/34.jpg" alt="">\r\n    <img class="photo" src="./img/suolong.jpg" alt="">\r\n    <article class="content">\r\n      目前在魔都。13年毕业于北药，在浙江top10的一家上市药企做过2年的国际药品注册。15年末正式加入智商暴躁的前端程序员大军。\r\n      <br><a href="#/pages/about">更多内容请点击此处</a>\r\n      <audio loop controls oncanplay="document.getElementById(\'audio\').volume = 0.3" id="audio" class="audio">\r\n        <source src="./media/xiaoyaotan.mp3" type="audio/mpeg" />\r\n        Your browser does not support the audio element.\r\n      </audio>\r\n    </article>\r\n    <footer class="social">\r\n      <span class="qq"></span>\r\n      <span class="wechat"></span>\r\n      <span class="email"></span>\r\n    </footer>\r\n  </section>\r\n  <section class="widget-normal" ng-if="categories.length">\r\n    <h4 class="widget-title"><span>分类目录</span></h4>\r\n    <ul class="categories">\r\n      <li ng-repeat="item in categories" class="list"><a ng-href="#/categories/{{item.slug}}/1">{{item.name}}</a></li>\r\n    </ul>\r\n  </section>\r\n  <section class="widget-normal" ng-if="archives.length">\r\n    <h4 class="widget-title"><span>文章归档</span></h4>\r\n    <ul class="archives">\r\n      <li ng-repeat="item in archives" class="list"><a ng-href="#/archives/{{item.year + \'-\' + item.month}}/1">{{item.year}}年{{item.month}}月</a></li>\r\n    </ul>\r\n  </section>\r\n  <section class="widget-normal" ng-if="friends.length">\r\n    <h4 class="widget-title"><span>一些链接</span></h4>\r\n    <ul class="links">\r\n      <li ng-repeat="item in friends" class="list"><a ng-href="{{item.url}}">{{item.name}}</a></li>\r\n    </ul>\r\n  </section>\r\n</aside>\r\n')}]);var archive={url:"/archives/:year-:month/:id",templateUrl:"tpls/posts.html",controller:["$rootScope","$scope","$stateParams","Api",function(t,e,n,s){e.from="months",e.value=n.year+"-"+n.month,e.baseLink="#/archives/"+n.year+"-"+n.month+"/",e.currentPostsPageId=parseInt(n.id),s.wait(!0),s.get("/blog/v1/months/"+n.year+"/"+n.month,{offset:10*(parseInt(n.id)-1),limit:"10"}).success(function(t){t&&t.code&&"200"===t.code&&(e.recentPosts=t.body.map(function(t){return{post_id:t.post_id,post_date:t.post_date,post_title:t.post_title,post_excerpt:t.post_excerpt,cat_slug:t.cat_slug,cat_name:t.cat_name,comment_count:t.comment_count,recent_comment_content:t.comment_recent}}))}).finally(function(){return s.wait(!1)})}]},categories={url:"/categories",templateUrl:"tpls/categories.html",controller:["$rootScope","$scope","$stateParams","Api",function(t,e,n,s){e.categoriesLogos={"qq-diary":"fa-qq","qq-copy":"fa-folder-o",diary:"fa-user",authoring:"fa-edit",else:"fa-terminal","office-software":"fa-file-word-o","article-by-others":"fa-chrome",usp:"fa-rocket",english:"fa-beer","pharmaceutical-information":"fa-newspaper-o","regulatory-affairs":"fa-registered","pharmaceutical-knowledge":"fa-university","reading-book":"fa-book"},s.wait(!0);for(var o=0,a=t.categories.length;o<a;o++)!function(e,n){s.get("/blog/v1/posts",{sortby:"ID",order:"rand",cat:t.categories[e].slug}).success(function(n){t.categories[e].posts=n.responseBody}).finally(function(){return s.wait(!1)})}(o)}]},category={url:"/categories/:slug/:id",templateUrl:"tpls/posts.html",controller:["$rootScope","$scope","$stateParams","Api",function(t,e,n,s){e.baseLink="#/categories/"+n.slug+"/",e.currentPostsPageId=parseInt(n.id),s.wait(!0),e.from="categories",e.value=n.slug,s.get("/blog/v1/excerpts",{sortby:"ID",order:"desc",cat:n.slug.toLowerCase(),offset:10*(parseInt(n.id)-1),limit:10}).success(function(t){t&&t.code&&"200"===t.code?e.recentPosts=t.body.map(function(t){return{post_id:t.post_id,post_title:t.post_title,post_date:t.post_date,post_excerpt:t.post_excerpt,cat_slug:t.cat_slug,cat_name:t.cat_name,comment_count:t.comment_count,recent_comment_content:t.comment_recent}}):t&&t.code&&"200"!==t.code?s.alert({text:t.message+"，错误代码："+t.code}):s.alert({text:"查询文章列表失败"})}).finally(function(){return s.wait(!1)})}]},login={url:"/login",templateUrl:"tpls/login.html",controller:["$rootScope","$scope",function(t,e){}]},page={url:"/pages/:name",templateUrl:"tpls/page.html",controller:["$rootScope","$scope","$stateParams","Api",function(t,e,n,s){s.wait(!0),s.get("/blog/v1/pages/"+n.name).success(function(t){t&&t.code&&"200"===t.code?t&&t.code&&"200"===t.code&&(e.post={post_id:t.body.post_id,post_title:t.body.post_title,post_content:t.body.post_content}):t&&t.code&&"200"!==t.code?s.alert({text:t.message+"，错误代码："+t.code}):s.alert({text:"查询文章内容失败"})}).finally(function(){return s.wait(!1)})}]},post={url:"/posts/:id?from&value",templateUrl:"tpls/post.html",controller:["$rootScope","$scope","$stateParams","$timeout","$interval","$sce","Api",function(t,e,n,s,o,a,r){e.postId=n.id,e.prePostId="",e.prePostStatus="正在查询上一篇文章信息",e.nextPostId="",e.nextPostStatus="正在查询下一篇文章信息",e.fromValueString="?from="+(n.from||"posts")+"&value="+(n.value||""),r.get("/blog/v1/post/siblings",{postId:n.id,from:n.from||"posts",value:n.value||""}).success(function(t){t&&t.code&&"200"===t.code?(e.prePostId=t.body.prev.post_id||"",e.prePostStatus=t.body.prev.post_id?t.body.prev.post_title:"没有更早的文章了",e.nextPostId=t.body.next.post_id||"",e.nextPostStatus=t.body.next.post_id?t.body.next.post_title:"没有更新的文章了"):t&&t.code&&"200"!==t.code?r.alert({text:t.message+"，错误代码："+t.code}):r.alert({text:"Oh, there is something wrong"})}).error(function(){e.prePostId="",e.prePostStatus="获取上一篇文章信息失败",e.nextPostId="",e.nextPostStatus="获取下一篇文章信息失败"}),e.comment={parent:"",author:"",email:"",url:"",message:"",tip:"",timing:5,flag:!0,replyHint:""},r.wait(!0),r.get("/blog/v1/posts/"+e.postId).success(function(t){t&&t.code&&"200"===t.code?(e.post={post_id:t.body.post_id,post_title:t.body.post_title,post_content:a.trustAsHtml(r.insertTagP(t.body.post_content)),post_date:t.body.post_date,cat_slug:t.body.cat_slug,cat_name:t.body.cat_name},r.highlightCode()):t&&t.code&&"200"!==t.code?r.alert({text:t.message+"，错误代码："+t.code}):r.alert({text:"Oh, there is something wrong"})}).finally(function(){return r.wait(!1)}),e.getRelatedPost=function(){return r.get("/blog/v1/related-posts",{postId:e.postId,limit:20}).success(function(t){t&&t.code&&"200"===t.code?e.relatedPosts=t.body.map(function(t){return{post_id:t.post_id,post_title:t.post_title}}):t&&t.code&&"200"!==t.code?r.alert({text:t.message+"，错误代码："+t.code}):r.alert({text:"获取相关文章列表失败"})}).error(function(){r.alert({text:"获取相关文章列表失败"})})},e.getComments=function(){return r.get("/blog/v1/comments",{postId:e.postId,limit:20}).success(function(t){t&&t.code&&"200"===t.code?e.relatedComments=t.body.map(function(t){return{comment_author:t.comment_author,comment_author_url:t.comment_author_url,comment_date:t.comment_date,comment_agent:t.comment_agent,comment_content:t.comment_content,comment_id:t.comment_ID,comment_parent_id:t.comment_parent_ID}}):t&&t.code&&"200"!==t.code?r.alert({text:t.message+"，错误代码："+t.code}):r.alert({text:"拉取评论列表失败"})})},e.countingDown=function(t,n){e.comment.timing=t,s(function(){e.comment.tip="",n&&n()},1e3*t);var a=o(function(){--e.comment.timing<1&&(o.cancel(a),e.comment.timing=t)},1e3)},e.validateComment=function(){return e.comment.author?e.comment.email?e.comment.url?!!e.comment.message||(e.comment.tip="请输入评论内容",$("#commentMessage").trigger("focus"),e.countingDown(6),!1):(e.comment.tip="请输入博客地址",$("#commentUrl").trigger("focus"),e.countingDown(6),!1):(e.comment.tip="请输入邮箱",$("#commentEmail").trigger("focus"),e.countingDown(6),!1):(e.comment.tip="请输入姓名",$("#commentAuthor").trigger("focus"),e.countingDown(6),!1)},e.reply=function(t){var n=t;e.comment.parentId=n.comment_id,e.comment.replyHint="to [["+n.comment_author+"]]: ",e.comment.message=e.comment.replyHint,$("#commentMessage").trigger("focus")},e.submitComment=function(){!1!==e.comment.flag&&!1!==e.validateComment()&&(e.comment.flag=!1,""!==e.comment.replyHint&&-1!==e.comment.message.indexOf(e.comment.replyHint)||(e.comment.parentId="0",e.comment.replyHint=""),r.post("/blog/v1/comment/create",{postId:e.postId,parentId:e.comment.parentId,author:e.comment.author,email:e.comment.email,url:e.comment.url,message:e.comment.message}).success(function(t){t&&t.code&&"200"===t.code&&(e.comment.tip=t.message,e.countingDown(6,function(){e.comment.flag=!0}),e.getComments())}).error(function(){e.comment.tip="提交评论失败，可能是网络问题",e.countingDown(6,function(){e.comment.flag=!0})}))},e.getFirstLevelComments=function(t){return 0===t.comment_parent_id},e.getRelatedPost(),e.getComments()}]},posts={url:"/:id",templateUrl:"tpls/posts.html",controller:["$rootScope","$scope","$stateParams","Api",function(t,e,n,s){e.baseLink="#/",e.currentPostsPageId=parseInt(n.id),e.from="posts",e.value="",s.wait(!0),s.get("/blog/v1/excerpts",{sortby:"ID",order:"desc",offset:10*(parseInt(n.id)-1),limit:"10"}).success(function(t){t&&t.code&&"200"===t.code?e.recentPosts=t.body.map(function(t){return{post_id:t.post_id,post_title:t.post_title,post_date:t.post_date,post_excerpt:t.post_excerpt,cat_slug:t.cat_slug,cat_name:t.cat_name,comment_count:t.comment_count,recent_comment_content:t.comment_recent}}):t&&t.code&&"200"!==t.code?s.alert({text:t.message+"，错误代码："+t.code}):s.alert({text:"There is something wrong"})}).finally(function(){return s.wait(!1)})}]},randomPost={url:"/posts/random",templateUrl:"tpls/post.html",controller:["$rootScope","$scope","$injector","Api",function(t,e,n,s){s.wait(!0),n.get("$templateCache").removeAll(),s.get("/blog/v1/posts",{sortby:"ID",order:"rand",offset:0,limit:"1"}).success(function(t){e.post=t.responseBody[0],s.get("/blog/v1/related-posts",{id:e.post.ID,limit:20}).success(function(t){return e.relatedPosts=t.responseBody}).finally(function(){return s.wait(!1)}),s.get("/blog/v1/comments",{postId:e.post.ID,limit:20}).success(function(t){return e.relatedComments=t.responseBody}).finally(function(){return s.wait(!1)})})}]},searchResult={url:"/search?:keyword&:pagenumber",templateUrl:"tpls/posts.html",controller:["$rootScope","$scope","$stateParams","Api",function(t,e,n,s){var o=n.keyword;e.from="search",e.value=o,e.baseLink="#/search?keyword="+o+"&pagenumber=",e.currentPostsPageId=parseInt(n.pagenumber),s.wait(!0),s.get("/blog/v1/search",{keyword:o,sortby:"post_date",order:"desc",offset:10*(e.currentPostsPageId-1),limit:"10"}).success(function(t){e.recentPosts=t.body}).finally(function(){return s.wait(!1)})}]};angular.module("app",["app-base","ui.router","templates"]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/1"),t.state("所有目录",categories).state("指定目录",category).state("随机文章",randomPost).state("具体文章",post).state("具体页面",page).state("指定月份",archive).state("登陆管理",login).state("搜索结果",searchResult).state("文章列表",posts)}]).run(["$rootScope","$state","$timeout","Api",function(t,e,n,s){function o(){var t=Object.keys(a),e=!0,o=!1,r=void 0;try{for(var c,i=t[Symbol.iterator]();!(e=(c=i.next()).done);e=!0){if(!1===c.value)return}}catch(t){o=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(o)throw r}}n(function(){s.load(!1)},300)}window.app=t,t.keyword="",angular.element("body").css({display:"block"});var a={categories:!1,randomPosts:!1,pages:!1,archives:!1,recentComments:!1};s.get("/blog/v1/cats").success(function(e){e&&e.code&&"200"===e.code?t.categories=e.body.map(function(t){return{slug:t.cat_slug,name:t.cat_name}}):e&&e.code&&"200"!==e.code?s.alert({text:e.message+"，错误代码："+e.code}):s.alert({text:"Oh, there is something wrong"})}).error(function(){}).finally(function(){a.categories=!0,o()}),s.get("/blog/v1/excerpts",{sortby:"ID",order:"RAND",limit:"10"}).success(function(e){e&&e.code&&"200"===e.code?t.randomPosts=e.body.map(function(t){return{post_id:t.post_id,post_title:t.post_title,post_date:t.post_date}}):e&&e.code&&"200"!==e.code?s.alert({text:e.message+"，错误代码："+e.code}):s.alert({text:"Oh, there is something wrong"})}).finally(function(){a.randomPosts=!0,o()}),s.get("/blog/v1/pages").success(function(e){e&&e.code&&"200"===e.code?t.pages=e.body.map(function(t){return{post_name:t.post_name,post_title:t.post_title}}):e&&e.code&&"200"!==e.code?s.alert({text:e.message+"，错误代码："+e.code}):s.alert({text:"Oh, there is something wrong"})}).finally(function(){a.pages=!0,o()}),s.get("/blog/v1/months").success(function(e){e&&e.code&&"200"===e.code?t.archives=e.body.map(function(t){return{year:t.year,month:t.month}}):e&&e.code&&"200"!==e.code?s.alert({text:e.message+"，错误代码："+e.code}):s.alert({text:"Oh, there is something wrong"})}).finally(function(){a.archives=!0,o()}),s.get("/blog/v1/comments",{
order:"desc",offset:"0",limit:"10"}).success(function(e){e&&e.code&&"200"===e.code?t.recentComments=e.body.map(function(t){return{post_id:t.post_ID,comment_content:t.comment_content}}):e&&e.code&&"200"!==e.code?s.alert({text:e.message+"，错误代码："+e.code}):s.alert({text:"Oh, there is something wrong"})}).finally(function(){a.recentComments=!0,o()}),t.search=function(e){e.preventDefault(),window.location.hash="#/search?keyword="+t.keyword+"&pagenumber=1"},t.currentYear=(new Date).getFullYear(),window.onload=window.onhashchange=function(){$("html, body").animate({scrollTop:0},"slow"),enableTooltips("app-nav")}}]);